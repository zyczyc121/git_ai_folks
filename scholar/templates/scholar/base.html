{% load static %}
<!DOCTYPE html>
<!-- saved from url=(0021)https://biendata.com/ -->
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="icon" type="image/png" href="https://biendata.com/static/img/favicon.png">

    <title>人才库</title>

    <link href="{% static "css/bootstrap.min.css" %}" rel="stylesheet" type="text/css" />
    <link href="{% static "css/font-awesome.min.css" %}" rel="stylesheet" />
    
    <link href="{% static "/css/style.css" %}" rel="stylesheet" type="text/css" />
    <link href="{% static "/css/controls.css" %}" rel="stylesheet" type="text/css" media="screen,projection" />
    <link href="{% static "/css/common.css" %}" rel="stylesheet" type="text/css" />

    <script type="application/javascript" src="{% static "js/jquery-1.11.3.min.js" %}" ></script>
    <script type="application/javascript" src="{% static "js/bootstrap.min.js" %}" ></script>
    <script src="https://cdn.bootcss.com/echarts/3.8.5/echarts.js"></script>

    <link href="https://cdn.bootcss.com/nvd3/1.1.15-beta/nv.d3.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/d3/3.5.17/d3.min.js"></script>
    <script src="https://cdn.bootcss.com/nvd3/1.1.15-beta/nv.d3.js"></script>

</head>
<body class='index'>
    <div class='head'>
        <div class='login'>
                DeepTech
        </div>
        <div class='nav'>
            <span aria-hidden="true" class="glyphicon glyphicon-search"></span>
	    <div class='input'>
	      <form action="{% url 'scholar:search' %}" method="get">
                  <input type="text" name="search_name" placeholder="搜索">
	      </form>
	    </div>
        </div>
        <div class='admin' id='admin-user-info'>
        <a>
            <span class='admin-background'>
	        <span class='fa fa-user'></span>
		{% if user.is_authenticated %}
                    {{ user.username }}
		{% else %}
		    新用户
		{% endif %}
		</span>
            <span class="fa fa-caret-down glyphicon"></span>
        </a>
        <div class='user-center'>
            <a data-toggle="modal" data-target="#myModal">
                注册
            </a>
	    {% if user.is_authenticated %}
                <a href="{% url 'user:logout' %}">退出</a>
            {% else %}
                <a data-toggle="modal" data-target="#login">
                    登陆
                </a>
            {% endif %}
        </div>
    </div>
    </div>
    <div class='body'>
        <div class="menu">
            <div class="panel-group table-responsive" role="tablist" id='accordion' aria-multiselectable="true">
                <div class="panel panel-primary leftMenu">
                    <!-- 利用data-target指定要折叠的分组列表 -->
                    <div class="panel-heading" id="collapseListGroupHeading1" data-toggle="collapse" data-parent="#accordion"  data-target="#collapseListGroup1" role="tab" >
                        <h4 class="panel-title">
                            <i class="fa fa-star"></i>
                            榜单
                            <span class="fa fa-caret-up right"></span>
                        </h4>
                    </div>
                    <!-- .panel-collapse和.collapse标明折叠元素 .in表示要显示出来 -->
                    <div id="collapseListGroup1" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="collapseListGroupHeading1">
                        <ul class="list-group">
                             <li class="list-group-item">
                                <!-- 利用data-target指定URL -->
                                <a href="{% url 'scholar:field_rank' 'artificial intellgience' %}" class="menu-item-left">
                                    人工智能
                                </a>
                            </li>
                            <li class="list-group-item">
                                <a href="{% url 'scholar:field_rank' 'machine learning' %}" class="menu-item-left">
                                    机器学习
                                </a>
                            </li>
                            <li class="list-group-item">
                                <a href="{% url 'scholar:field_rank' 'data mining' %}" class="menu-item-left">
                                    数据挖掘
                                </a>
                            </li>
                            <li class="list-group-item">
                                <a href="{% url 'scholar:field_rank' 'computer networking' %}" class="menu-item-left">
                                    计算机网络
                                </a>
                            </li>
                            <li class="list-group-item">
                                <a href="{% url 'scholar:field_rank' 'natural language processing' %}" class="menu-item-left">
                                    NLP
                                </a>
                            </li>
                            <li class="list-group-item">
                                <a href="{% url 'scholar:field_rank' 'computer graphics' %}" class="menu-item-left">
                                    计算机图形
                                </a>
                            </li>
                            <li class="list-group-item">
                                <a href="{% url 'scholar:field_rank' 'multimedia' %}" class="menu-item-left">
                                    多媒体
                                </a>
                            </li>
                            <li class="list-group-item">
                                <a href="{% url 'scholar:field_rank' 'web-information search' %}" class="menu-item-left">
                                    网络搜索
                                </a>
                            </li>
			                  <li class="list-group-item">
                                <a href="{% url 'scholar:field_rank' 'system' %}" class="menu-item-left">
                                    计算机系统
                                </a>
                            </li>
                            <li class="list-group-item">
                                <a href="{% url 'scholar:field_rank' 'database' %}" class="menu-item-left">
                                    数据库
                                </a>
                            </li>
			                 <li class="list-group-item">
                                <a href="{% url 'scholar:field_rank' 'security' %}" class="menu-item-left">
                                    计算机安全
                                </a>
                            </li>
			                  <li class="list-group-item">
                                <a href="{% url 'scholar:field_rank' 'human-computern interaction' %}" class="menu-item-left">
                                    人机交互
                                </a>
                            </li>
			                  <li class="list-group-item">
                                <a href="{% url 'scholar:field_rank' 'software engineering' %}" class="menu-item-left">
                                    软件工程
                                </a>
                            </li>
			                 <li class="list-group-item">
                                <a href="{% url 'scholar:field_rank' 'theory' %}" class="menu-item-left">
                                    计算机理论
                                </a>
                            </li>
                        </ul>
                    </div>

                </div><!--panel end-->
                <div class="panel panel-primary leftMenu">
                    <!-- 利用data-target指定要折叠的分组列表 -->
                    <div class="panel-heading collapsed" id="collapseListGroupHeading2" data-toggle="collapse" data-parent="#accordion"  data-target="#collapseListGroup2" role="tab" >
                        <h4 class="panel-title">
                            <i class="fa fa-star"></i>
                            我的人才库
                            <span class="fa fa-caret-down right"></span>
                            <span class="fa fa-plus add" style="color:#515565;float: right;line-height: 20px" id="add_collection" data-toggle="modal" data-target="#addcoll"></span>
                        </h4>
                       
                    </div>
                    <div id="collapseListGroup2" class="panel-collapse collapse " role="tabpanel" aria-labelledby="collapseListGroupHeading2">
		      {% for item in user.collection_set.filter %}
                        <ul class="list-group" style="color: white" id="addcolls">
                            <li class="list-group-item">
                                <span style="width: 80px;display: block;float: left;text-align: center;overflow: hidden;text-overflow: ellipsis;"> {{ item.name }}</span>
                                  <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="fa fa-ellipsis-h" style="margin-left: 50px;color: white"></span> </a>
                                     <ul class="dropdown-menu" style="margin-left:50px">
                                        <li><a data-toggle="modal" data-target="#editcoll">
                                                编辑标签
                                            </a></li>
                                        <li><a data-toggle="modal" data-target="#removecoll">
                                                删除标签
                                            </a></li>
                                    </ul>
                            </li>
                        </ul>
			{% endfor %}
                    </div>
                </div>
		<!--
                <div class="panel panel-primary leftMenu">
                    <div class="panel-heading collapsed" id="collapseListGroupHeading2" data-toggle="collapse" data-parent="#accordion"  data-target="#collapseListGroup2" role="tab" >
                        <h4 class="panel-title">
                            <i class="fa fa-user"></i>
                            人才库
                            <span class="fa fa-caret-down right"></span>
                        </h4>
                    </div>
                    <div id="collapseListGroup2" class="panel-collapse collapse" role="tabpanel" aria-labelledby="collapseListGroupHeading2">
                        <ul class="list-group">
                        </ul>
                    </div>
                </div>  
                <div class="panel panel-primary leftMenu">
                    <div class="panel-heading collapsed" id="collapseListGroupHeading3" data-toggle="collapse" data-parent="#accordion"  data-target="#collapseListGroup3" role="tab" >
                        <h4 class="panel-title">
                            <i class="fa fa-list-alt"></i>
                            论文
                            <span class="fa fa-caret-down right"></span>
                        </h4>
                    </div>
                    <div id="collapseListGroup3" class="panel-collapse collapse" role="tabpanel" aria-labelledby="collapseListGroupHeading3">
                        <ul class="list-group">
                        </ul>
                    </div>
                </div>  
                <div class="panel panel-primary leftMenu">
                    <div class="panel-heading collapsed" id="collapseListGroupHeading4" data-toggle="collapse" data-parent="#accordion"  data-target="#collapseListGroup4" role="tab" >
                        <h4 class="panel-title">
                            <i class="fa fa-video-camera"></i>
                            媒体报道
                            <span class="fa fa-caret-down right"></span>
                        </h4>
                    </div>
                    <div id="collapseListGroup4" class="panel-collapse collapse" role="tabpanel" aria-labelledby="collapseListGroupHeading4">
                        <ul class="list-group">
                        </ul>
                    </div>
                </div>  
                <div class="panel panel-primary leftMenu">
                    <div class="panel-heading collapsed" id="collapseListGroupHeading5" data-toggle="collapse" data-parent="#accordion"  data-target="#collapseListGroup5" role="tab" >
                        <h4 class="panel-title">
                            <i class="fa fa-lightbulb-o"></i>
                            专利
                            <span class="fa fa-caret-down right"></span>
                        </h4>
                    </div>
                    <div id="collapseListGroup5" class="panel-collapse collapse" role="tabpanel" aria-labelledby="collapseListGroupHeading5">
                        <ul class="list-group">
                        </ul>
                    </div>
                </div>  
                <div class="panel panel-primary leftMenu">
                    <div class="panel-heading collapsed" id="collapseListGroupHeading6" data-toggle="collapse" data-parent="#accordion"  data-target="#collapseListGroup6" role="tab" >
                        <h4 class="panel-title">
                            <i class="fa fa-magic"></i>
                            定制人才库
                            <span class="fa fa-caret-down right"></span>
                        </h4>
                    </div>
                    <div id="collapseListGroup6" class="panel-collapse collapse" role="tabpanel" aria-labelledby="collapseListGroupHeading6">
                        <ul class="list-group">
                        </ul>
                    </div>
                </div>
		-->
            </div>
        </div>
        <div class="content">
          {% block content %}{% endblock %}
        </div>
    </div>
    </div>

    <div class="modal fade" id="login" tabindex="-1" show=true role="dialog" aria-labelledby="loginLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header" style='border: none;'>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="loginLabel" style='text-align: center;color: #5d83ff;'>
                            登陆
                    </h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal" id='formLogin' method="post" action="/user/login/">
			{% csrf_token %}
                        <div class="form-group">
                            <div class="col-sm-offset-3 col-sm-6">
                                <div class="input-group">
                                    <div class="input-group-addon" style='background: none;color: #666;font-size: 20px;'>
                                        <span class="fa fa-user-circle-o" style='width: 20px;'></span>
                                    </div>
                                    <input type="text" name="username" class="form-control" id="login_username" placeholder="请输入账号">
				    <div id="login_username_err" style='color: red'></div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-offset-3 col-sm-6">
                                <div class="input-group">
                                    <div class="input-group-addon" style='background: none;color: #666;font-size: 20px;'>
                                        <span class="fa fa-unlock-alt" style='width: 20px;'></span>
                                    </div>
                                    <input type="password" name="password" class="form-control" id="login_password" placeholder="请输入密码">
				    <div id="login_password_err" style='color: red'></div>
                                </div>
                            </div>
                        </div>
			<!--
                        <div class="form-group">
                            <div class="col-sm-offset-3 col-sm-6">
                                <div style='width: 100%;padding-right: 100px;'>
                                        <div class="input-group">
                                            <div class="input-group-addon" style='background: none;color: #666;font-size: 20px;'>
                                                <span class="fa fa-get-pocket" style='width: 20px;'></span>
                                            </div>
                                            <input type="text" class="form-control" id="login_imgverify" placeholder="请输入右侧验证码">
                                        </div>
                                        <img src="" alt="图形验证码" style='position: absolute;right: 0;top: 0;width: 94px;height: 34px;line-height: 34px;'>
                                </div>
                            </div>
                        </div>  -->
                        <div class="form-group">
                            <div class="col-sm-offset-3 col-sm-6">
                                <div class="input-group">
                                    <label>
                                        <input type="checkbox" checked> 记住密码
                                    </label>
                                </div>
                                <!-- <div style='position: absolute;right: 0;top: 0;'>
                                    <label class='forget_password'>
                                        忘记密码？
                                    </label>
                                </div> -->
                            </div>
                        </div>
                        <div class="form-group" style='margin-top: 30px'>
                            <div class="col-sm-offset-3 col-sm-6">
                                <button type="submit" class="sentBtn bgc" id='login_btn' style='width: 100%;'>登陆</button>
                            </div>
                        </div>
                        <div class='text-center' style='margin: 20px 0'>
                                <span>
                                    <span>还没有账号？</span>
                                    <a style='color: #5d83ff;cursor: pointer;' id='go_to_register'>去注册→</a>
                                </span>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="myModal" tabindex="-1" show=true role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header" style='border: none;'>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <span style='position: absolute;'>
                        <span>已有账号？</span>
                        <a style='color: #5d83ff;cursor: pointer;' id='go_to_login'>去登陆→</a>
                    </span>
                    <h4 class="modal-title" id="myModalLabel" style='text-align: center;color: #5d83ff;'>
		      创建新账号
		    </h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal" id='form' method="post" action="/user/signup/">
		        {% csrf_token %}
                        <div class="form-group">
                            <label for="username" class="col-sm-4 control-label">用户名</label>
                            <div class="col-sm-6">
                                <input type="text" name="username" class="form-control" id="username" placeholder="用户名只能有字母、数字和下划线">
			    	<div id="username_err" style='color: red'></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="email" class="col-sm-4 control-label">注册邮箱</label>
                            <div class="col-sm-6">
                                <input type="email" name="email" class="form-control" id="email" placeholder="请输入您的邮箱">
				<div id="email_err" style='color: red'></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="name" class="col-sm-4 control-label">姓名</label>
                            <div class="col-sm-6">
                                <input type="text" name="first_name" class="form-control" id="name" placeholder="请输入您的姓名">
				<div id="name_err" style='color: red'></div>
                            </div>
                        </div>
			<!--
                        <div class="form-group">
                            <label for="phone" class="col-sm-4 control-label">手机号码</label>
                            <div class="col-sm-6">
                                <div class="input-group">
                                    <div class="input-group-addon" style='background: none;color: #5d83ff;'>+86</div>
                                    <input type="text" class="form-control" id="phone" placeholder="请输入您的手机号码">
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="verify" class="col-sm-4 control-label">手机验证码</label>
                            <div class="col-sm-6">
                                <div style='width: 100%;padding-right: 100px;'>
                                    <input type="text" class="form-control" id="verify" placeholder="请输入手机接收的验证码">
                                    <button type="button" class="sentBtn" style='position: absolute;right: 0;top: 0;'>发送验证码</button>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="imgverify" class="col-sm-4 control-label">图形验证码</label>
                            <div class="col-sm-6">
                                <div style='width: 100%;padding-right: 100px;'>
                                        <input type="text" class="form-control" id="imgverify" placeholder="请输入右侧验证码">
                                        <img src="" alt="图形验证码" style='position: absolute;right: 0;top: 0;width: 94px;height: 34px;line-height: 34px;'>
                                </div>
                            </div>
                        </div>
			-->
                        <div class="form-group">
                            <label for="password1" class="col-sm-4 control-label">密码</label>
                            <div class="col-sm-6">
                                <input type="password" name="password1" class="form-control" id="password1" placeholder="密码至少有8位并且要是大写字母、小写字母、数字、特殊字符 满足其中三种即可">
				<div id="password1_err" style='color: red'></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="password2" class="col-sm-4 control-label">确认密码</label>
                            <div class="col-sm-6">
                                <input type="password" name="password2" class="form-control" id="password2" placeholder="重复输入密码">
				<div id="password2_err" style='color: red'></div>
                            </div>
                        </div>
                        <div class="form-group" style='margin-top: 30px'>
                            <div class="col-sm-offset-4 col-sm-6">
                                <button type="submit" class="sentBtn" style='width: 100%;'>下一步</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="alert alert-success alert-dismissable" tabindex="-1" show=true role="dialog" id="alert">
                        <button type="button" class="close" data-dismiss="alert"
                                aria-hidden="true">
                            &times;
                        </button>
                        成功！很好地完成了提交。
        </div>
    <div class="modal fade" id="addcoll" tabindex="-1" show=true role="dialog" aria-labelledby="addcollection">
         <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header" style='border: none;'>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="loginLabel" style='text-align: center;color: #5d83ff;'>
                            新建标签
                    </h4>
                </div>
                <div class="modal-body">
                   <label style="float: left;margin-left: 20px">标签名称</label>
                   <textarea name="" id="addcoll_txt" cols="30" rows="10" style="resize: none;width: 70%;margin-left: 5%;border:3px solid #eee;border-radius: 3px;padding:10px;box-sizing: border-box;"
                   placeholder="最多10个中文字符或20个英文字符，请不要输入 “ | ;& # 等特殊字符，同时新建多个标签请在每个标签后换行，最多支持新建9个标签。"></textarea>
                   <br>
                   <br>
                    <button class="btn btn-primary" type="button" style="margin-left:250px;padding:3px 30px;font-size: 13px;background: transparent;border:1px solid #337ab7;color: #337ab7" id="cancel_add">取消</button>
                    <button class="btn btn-primary" type="button" style="margin-left:20px;padding:3px 30px;font-size: 13px;background: transparent;border:1px solid #337ab7;color: #337ab7" id="determine_add" >确定</button>
                   <div style="clear: both;"></div>

                </div>
            </div>
         </div>
    </div>
     <div class="modal fade" id="editcoll" tabindex="-1" show=true role="dialog" aria-labelledby="addcollection">
         <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header" style='border: none;'>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="loginLabel" style='text-align: center;color: #5d83ff;'>
                            编辑标签
                    </h4>
                </div>
                <div class="modal-body">
                  <label style="margin-left: 10px">编辑标签</label>
                  <input type="text" id="edit_text" style="width: 75%;height: 50px;border-radius: 3px;border:2px solid #eee;margin-left: 30px;padding: 10px;box-sizing: border-box;">
                  <br>
                  <br>
                     <button class="btn btn-primary" type="button" style="margin-left:250px;padding:3px 30px;font-size: 13px;background: transparent;border:1px solid #337ab7;color: #337ab7" id="cancel_edit">取消</button>
                    <button class="btn btn-primary" type="button" style="margin-left:20px;padding:3px 30px;font-size: 13px;background: transparent;border:1px solid #337ab7;color: #337ab7" id="determine_edit" >确定</button>
                </div>
            </div>
         </div>
    </div>
    <div class="modal fade" id="removecoll" tabindex="-1" show=true role="dialog" aria-labelledby="addcollection">
         <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header" style='border: none;'>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="loginLabel" style='text-align: center;color: #5d83ff;'>
                            删除标签
                    </h4>
                </div>
                <div class="modal-body">
                  <label style="margin-left: 10px;float: left;">删除提示</label>
                  <textarea name="" id="" cols="50" rows="5" style="border-radius: 3px;border:2px solid #eee;margin-left: 30px;padding: 10px;box-sizing: border-box;resize: none" readonly="true">对该标签的删除会将该标签的子集和相关标注内容一并删除，请谨慎操作。</textarea>
                  <br>
                  <br>
                     <button class="btn btn-primary" type="button" style="margin-left:250px;padding:3px 30px;font-size: 13px;background: transparent;border:1px solid #337ab7;color: #337ab7" id="cancel_remove">取消</button>
                    <button class="btn btn-primary" type="button" style="margin-left:20px;padding:3px 30px;font-size: 13px;background: transparent;border:1px solid #337ab7;color: #337ab7" id="determine_remove" >确定</button>
                </div>
            </div>
         </div>
    </div>
    <div class="modal fade" id="folkscoll" tabindex="-1" show=true role="dialog" aria-labelledby="addcollection">
         <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header" style='border: none;'>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="loginLabel" style='text-align: center;color: #5d83ff;'>
                            标签标注-Bart Selman
                    </h4>
                </div>
                <div class="modal-body">
                  <label style="margin-left: 10px;float: left;">标签选择</label>
                  <div style="width: 80%;height: 170px;border:1px solid #ccc;float: left;margin-left: 20px;border-radius: 3px">
                        <div class="dropdown">
                            <button type="button" class="btn dropdown-toggle" id="dropdownMenu1" data-toggle="dropdown">主题
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                                <li role="presentation">
                                    <a role="menuitem" tabindex="-1" href="#">Java</a>
                                </li>
                                <li role="presentation">
                                    <a role="menuitem" tabindex="-1" href="#">数据挖掘</a>
                                </li>   
                                <li role="presentation">
                                    <a role="menuitem" tabindex="-1" href="#">数据通信/网络</a>
                                </li>
                                <li role="presentation" class="divider"></li>
                                <li role="presentation">
                                    <a role="menuitem" tabindex="-1" href="#">分离的链接</a>
                                </li>
                            </ul>
                        </div>
                  </div>
                  <br>
                  <br>
                     <button class="btn btn-primary" type="button" style="margin-left:250px;padding:3px 30px;font-size: 13px;background: transparent;border:1px solid #337ab7;color: #337ab7" id="cancel_remove">取消</button>
                    <button class="btn btn-primary" type="button" style="margin-left:20px;padding:3px 30px;font-size: 13px;background: transparent;border:1px solid #337ab7;color: #337ab7" id="determine_remove" >确定</button>
                </div>
            </div>
         </div>
    </div>

   
    <script>

    $(function(){
        let timer=null,addcoll_list=''
        $("#alert").hide()
        $("#addcolls>li>a").unbind('click').bind("click",function(){
            operate($(this).parent().index(),$(this).prev().text())
         })
      
            //对标签进行操作 operate
        function operate(i,text){
                //取消删除标签
            $("#cancel_remove").click(function(){
                $("#removecoll").modal("hide")
            })
                //确定删除标签
             $("#determine_remove").unbind("click").click(function(){
                $("#removecoll").modal("hide")
                $("#alert").text('删除成功')
                $("#alert").show(500)
                $('#addcolls>li').eq(i).hide(200)
                timer=setTimeout(()=>{
                     $("#alert").hide(500)
                },1500)
            })

             $("#edit_text").val(text)
                  //取消编辑标签
            $("#cancel_edit").click(function(){
                $("#editcoll").modal("hide")
            })
                //确定编辑标签    
             $("#determine_edit").unbind('click').click(function(){
                $("#editcoll").modal("hide")
                $("#alert").text('编辑成功')
                $("#alert").show(500)
                $('#addcolls>li').eq(i).find('span').eq(0).text( $("#edit_text").val())
                timer=setTimeout(()=>{
                     $("#alert").hide(500)
                },1500)
            })
        }

            //取消添加标签
        $("#cancel_add").click(function(){
            $("#addcoll").modal("hide")
        })
            //确定添加标签
         $("#determine_add").click(function(){
            $("#addcoll").modal("hide")
            addcoll_list=`<li class="list-group-item">
                               <span  style="width: 80px;display: block;float: left;text-align: center;overflow: hidden;text-overflow: ellipsis;"> ${$("#addcoll_txt").val()}</span>
                                  <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="fa fa-ellipsis-h" style="margin-left: 50px;color: white"></span>    </a>
                                     <ul class="dropdown-menu" style="margin-left:50px">
                                        <li><a data-toggle="modal" data-target="#editcoll">
                                                编辑标签
                                            </a></li>
                                        <li><a data-toggle="modal" data-target="#removecoll">
                                                删除标签
                                            </a></li>
                                    </ul>
                            </li>`
            $("#addcolls").append(addcoll_list)
            $("#alert").text('添加成功')
            $("#addcoll_txt").val("")
            $("#addcolls>li>a").unbind('click').bind("click",function(){
                operate($(this).parent().index(),$(this).prev().text())
             })
            $("#alert").show(500)
            timer=setTimeout(()=>{
                 $("#alert").hide(500)
            },1500)
        })

        $(".panel-heading").click(function(e){
            /*切换折叠指示图标*/
            $(this).find("span.right").toggleClass("fa-caret-down");
            $(this).find("span.right").toggleClass("fa-caret-up");
            
            // $('.panel-heading.collapsed').find('.panel-title>span.right').removeClass('fa-caret-up');
            // $('.panel-heading.collapsed').find('.panel-title>span.right').removeClass('fa-caret-down');
            // $('.panel-heading.collapsed').find('.panel-title>span.right').addClass('fa-caret-down');
        });

        $("#form").submit(function(e){
            //用户名
	    event.preventDefault();
            var username = $('#username').val();

            if (!checkPassword()) {
                return false;
            }

            $.ajax({
		type: "POST",
                url:"{% url 'user:signup' %}",
		'data': {
	            'csrfmiddlewaretoken': '{{ csrf_token }}',
		    'username': $('#username').val(),
		    'email': $('#email').val(),
		    'first_name': $('#name').val(),
		    'password1': $('#password1').val(),
		    'password2': $('#password2').val(),
        	},
                success:function(result){
		    if (result.err == 'success') {
		        location.reload();
			return false;
 		    }
		    result = JSON.parse(result)
                    $('#username_err').text(result.username[0].message);
                    $('#email_err').text(result.email[0].message);
                    $('#name_err').text(result.username[0].message);
                    $('#password1_err').text(result.password1[0].message);
                    $('#password2_err').text(result.password2[0].message);
                }
            });
            
            return false;
        });


	$("#formLogin").submit(function(e){
            
	    event.preventDefault();

            $.ajax({
		type: "POST",
                url:"{% url 'user:login' %}",
		'data': {
	            'csrfmiddlewaretoken': '{{ csrf_token }}',
		    'username': $('#login_username').val(),
		    'password': $('#login_password').val(),
       		},
                success:function(result){
		    if (result.err == 'success') {
		        location.reload();
			return false;
 		    }
		    result = JSON.parse(result)
		    console.log(result)
                    //$('#login_username_err').text(result);
                    $('#login_password_err').text(result.username[0].message);		    
                }
            });
            
            return false;
        });

        $("#go_to_register").click(function(e){
            $('#myModal').modal('show')
            $('#login').modal('hide')
        });

        $("#go_to_login").click(function(e){
            $('#myModal').modal('hide')
            $('#login').modal('show')
        });
        
        $("#login_username").change(function(e){
            var username = $("#login_username").val();
            var password = $("#login_password").val();
            var imgverify = $("#login_imgverify").val();

            if (username.length > 0 && password.length > 0 ) {
                $("#login_btn").removeClass('bgc');
            }
        });

        $("#login_password").change(function(e){
            var username = $("#login_username").val();
            var password = $("#login_password").val();
            var imgverify = $("#login_imgverify").val();

            if (username.length > 0 && password.length > 0 ) {
                $("#login_btn").removeClass('bgc');
            }
        });
        
        $("#login_imgverify").change(function(e){
            var username = $("#login_username").val();
            var password = $("#login_password").val();
            var imgverify = $("#login_imgverify").val();

            if (username.length > 0 && password.length > 0 && imgverify.length > 0) {
                $("#login_btn").removeClass('bgc');
            }
        });



        // 密码校验
        function checkPassword() {
            var passwordValue = $.trim($('#password1').val());
            var rePasswordValue = $.trim($('#password2').val());
            if ("" == passwordValue) {
                alert("请输入密码");
                return false;
            }

            if (!checkStrong(passwordValue)) {
                alert("8-20位数字、大小写字母或特殊字符(4选3)");
                return false;
            }

            if (rePasswordValue != "" && passwordValue != rePasswordValue) {
                alert("输入的密码不一致");
                return false;
            }

            return true;
        }

        //大写字母、小写字母、数字、特殊字符 满足其中三种即可
        function checkStrong(value) {
            var strength = 0;
            if (value.length > 7 && value.match(/[\da-zA-Z]+/)) {
                if (value.match(/\d+/)) {
                    strength++;
                }
                if (value.match(/[a-z]+/)) {
                    strength++;
                }
                if (value.match(/[A-Z]+/)) {
                    strength++;
                }
                if (value.match(/[!@*$-_()+=&￥]+/)) {
                    strength++;
                }
            }
            if (strength >= 3) {
                return true;
            }
            return false;
        }
    });
    

    </script>



</body>

</html>
